{% extends 'base.html' %}
{% load static %}

{% block title %}–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç - TechBlog{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/forms.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="form-page">
        <div class="form-header">
            <h1>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</h1>
            <p class="form-subtitle">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏ —Å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º</p>
        </div>

        <form method="post" class="post-form" id="postForm">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="{{ form.title.id_for_label }}" class="form-label">
                    –ó–∞–≥–æ–ª–æ–≤–æ–∫ <span class="required">*</span>
                </label>
                {{ form.title }}
                {% if form.title.errors %}
                    <div class="form-errors">{{ form.title.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.content.id_for_label }}" class="form-label">
                    –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ <span class="required">*</span>
                </label>
                <div class="markdown-help">
                    <button type="button" class="btn-text" id="markdownGuideBtn">
                        üìñ –°–ø—Ä–∞–≤–∫–∞ –ø–æ Markdown
                    </button>
                </div>
                {{ form.content }}
                {% if form.content.errors %}
                    <div class="form-errors">{{ form.content.errors }}</div>
                {% endif %}
                <small class="form-help">–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Markdown –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞</small>
            </div>

            <div class="form-group">
                <label class="form-label">–¢–µ–≥–∏</label>
                <div class="tags-selection">
                    {{ form.tags }}
                </div>
                {% if form.tags.errors %}
                    <div class="form-errors">{{ form.tags.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.new_tags.id_for_label }}" class="form-label">
                    –ù–æ–≤—ã–µ —Ç–µ–≥–∏
                </label>
                {{ form.new_tags }}
                {% if form.new_tags.errors %}
                    <div class="form-errors">{{ form.new_tags.errors }}</div>
                {% endif %}
                <small class="form-help">{{ form.new_tags.help_text }}</small>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                <a href="{% url 'blog:posts_list' %}" class="btn btn-outline btn-lg">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Å–ø—Ä–∞–≤–∫–æ–π –ø–æ Markdown -->
<div class="modal" id="markdownGuideModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>–°–ø—Ä–∞–≤–∫–∞ –ø–æ Markdown</h3>
            <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
            <div class="markdown-guide">
                <h4>–ó–∞–≥–æ–ª–æ–≤–∫–∏</h4>
                <pre># –ó–∞–≥–æ–ª–æ–≤–æ–∫ 1
## –ó–∞–≥–æ–ª–æ–≤–æ–∫ 2
### –ó–∞–≥–æ–ª–æ–≤–æ–∫ 3</pre>

                <h4>–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞</h4>
                <pre>**–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**
*–ö—É—Ä—Å–∏–≤*
~~–ó–∞—á–µ—Ä–∫–Ω—É—Ç—ã–π~~</pre>

                <h4>–°–ø–∏—Å–∫–∏</h4>
                <pre>- –≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
- –î—Ä—É–≥–æ–π —ç–ª–µ–º–µ–Ω—Ç
  - –í–ª–æ–∂–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç

1. –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
2. –í—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç</pre>

                <h4>–°—Å—ã–ª–∫–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h4>
                <pre>[–¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏](https://example.com)
![–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è](url-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)</pre>

                <h4>–ö–æ–¥</h4>
                <pre>`inline –∫–æ–¥`

```python
# –ë–ª–æ–∫ –∫–æ–¥–∞
def hello():
    print("Hello, World!")
```</pre>

                <h4>–¶–∏—Ç–∞—Ç—ã</h4>
                <pre>> –≠—Ç–æ —Ü–∏—Ç–∞—Ç–∞
> –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–π</pre>

                <h4>–¢–∞–±–ª–∏—Ü—ã</h4>
                <pre>| –ó–∞–≥–æ–ª–æ–≤–æ–∫ 1 | –ó–∞–≥–æ–ª–æ–≤–æ–∫ 2 |
|-------------|-------------|
| –Ø—á–µ–π–∫–∞ 1    | –Ø—á–µ–π–∫–∞ 2    |</pre>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/markdown-editor.js' %}"></script>
{% endblock %}

