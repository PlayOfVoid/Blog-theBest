{% extends "admin/base.html" %}
{% load static %}

{% block title %}{% if subtitle %}{{ subtitle }} | {% endif %}{{ title }} | TechBlog Admin{% endblock %}

{% block branding %}
<div class="admin-branding" id="admin-branding">
    <h1 id="site-name">
        <a href="{% url 'admin:index' %}">
            <span class="admin-logo">üìù</span> TechBlog Admin
        </a>
    </h1>
    
    {% if user.is_authenticated %}
    <div class="admin-user-info">
        <span class="admin-username">{{ user.username }}</span>
        <button type="button" class="admin-theme-toggle" id="adminThemeToggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
            <span class="theme-icon">üåì</span>
        </button>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/admin-custom.css' %}">
{% endblock %}

{% block extrahead %}
{{ block.super }}
<script>
// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('adminThemeToggle');
    const htmlElement = document.documentElement;
    
    // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É –∏–∑ localStorage
    let currentTheme = localStorage.getItem('admin-theme') || 'light';
    htmlElement.setAttribute('data-admin-theme', currentTheme);
    
    if (themeToggle) {
        themeToggle.addEventListener('click', function() {
            const themes = ['light', 'dark', 'cyber'];
            const currentIndex = themes.indexOf(currentTheme);
            const nextIndex = (currentIndex + 1) % themes.length;
            currentTheme = themes[nextIndex];
            
            htmlElement.setAttribute('data-admin-theme', currentTheme);
            localStorage.setItem('admin-theme', currentTheme);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É
            const icon = this.querySelector('.theme-icon');
            if (currentTheme === 'dark') {
                icon.textContent = 'üåô';
            } else if (currentTheme === 'cyber') {
                icon.textContent = '‚ö°';
            } else {
                icon.textContent = '‚òÄÔ∏è';
            }
        });
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∏–∫–æ–Ω–∫—É
        const icon = themeToggle.querySelector('.theme-icon');
        if (currentTheme === 'dark') {
            icon.textContent = 'üåô';
        } else if (currentTheme === 'cyber') {
            icon.textContent = '‚ö°';
        } else {
            icon.textContent = '‚òÄÔ∏è';
        }
    }
});
</script>
{% endblock %}

